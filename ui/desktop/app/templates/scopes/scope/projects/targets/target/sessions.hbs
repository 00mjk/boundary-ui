<Rose::Table as |table|>
  <table.body as |body|>
    {{!--
      TODO:  sort these via the controller so that active and pending appear first
      similar to the way the sessions routes are sorted.
     --}}
    {{#each @model.target.sessions as |session|}}
      <body.row as |row|>
        <row.cell class="nowrap">
          <Rose::Icon
            class={{concat "session-status-" session.status}}
            @name="app-icons/action-session"
            @size="medium" />
          <Copyable
            @text={{session.id}}
            @buttonText={{t "actions.copy-to-clipboard"}}
            @acknowledgeText={{t "states.copied"}}
          >
            <code>{{session.id}}</code>
          </Copyable>
        </row.cell>
        <row.cell>
          {{!--
            Two if's here because:
            1) Local proxy info is only relevant if the session is
                active or pending (aka isCancelable).  Once the session
                is canceled or in the process thereof, the local proxy
                may no longer be used.
            2) The session actually has proxy information associated
                with it.  It's possible for the user to start sessions
                from other devices (or even another tab), in which case we
                won't have the local proxy info available here.
          --}}
          {{#if session.isCancelable}}
            {{#if session.proxy}}
              <Copyable
                @text={{session.proxy}}
                @buttonText={{t "actions.copy-to-clipboard"}}
                @acknowledgeText={{t "states.copied"}}
              >
                <code>{{session.proxy}}</code>
              </Copyable>
            {{/if}}
          {{/if}}
        </row.cell>
        <row.cell>
          <time datetime={{format-date-iso session.created_time}}>
            {{format-date-iso-human session.created_time}}
          </time>
        </row.cell>
        <row.cell>
          <Rose::Badge>{{session.status}}</Rose::Badge>
        </row.cell>
        <row.cell>
          {{#if session.isCancelable}}
            <Rose::Button @style="secondary" {{on "click" (route-action "cancelSession" session)}}>
              {{t "actions.cancel"}}
            </Rose::Button>
          {{/if}}
        </row.cell>
      </body.row>
    {{/each}}
  </table.body>
</Rose::Table>
